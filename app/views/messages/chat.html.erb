<!-- app/views/messages/chat.html.erb -->
<div class="chat-container">
  <div id="chat-room" data-recipient-id="<%= @recipient.id %>" data-current-user-id="<%= current_user.id %>" class="chat-messages">
    <div id="message-display" class="messages-container">
      <% @messages.each do |message| %>
        <div class="message <%= message.sender == current_user ? 'sent' : 'received' %>">
          <div class="message-content">
            <p><%= message.body %></p>
            <span class="timestamp"><%= message.created_at.strftime("%I:%M %p") %></span>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <%= form_with(model: @message, local: false, id: "message-form", class: "message-form") do |f| %>
    <%= f.hidden_field :recipient_id, value: @recipient.id %>
    <div class="input-group">
            <%= f.text_field :body, class: "form-control", id:"message-input", placeholder: "Message..." %>
            <%= f.submit 'Send', class: 'btn btn-send' %>
    </div>
  <% end %>
</div>

<style>
    .chat-container {
        background-color: #ffffff;
        height: 100vh;
        color: #262626;
    }

  .messages-container {
    padding: 20px;
    overflow-y: auto;
        height: calc(95vh - 150px);
        background-color: #ffffff;
  }

  .message {
    display: flex;
        margin-bottom: 8px;
  }

  .message.sent {
    justify-content: flex-end;
  }

  .message-content {
        max-width: 60%;
        padding: 8px 12px;
        border-radius: 22px;
        font-size: 0.9rem;
  }

  .sent .message-content {
        background-color: #efefef;
        color: #262626;
  }

  .received .message-content {
        background-color: #efefef;
        color: #262626;
  }

  .timestamp {
        font-size: 0.65rem;
        color: #8e8e8e;
    display: block;
        margin-top: 4px;
  }

  .sent .timestamp {
    text-align: right;
  }

  .message-form {
        padding: 12px;
        background-color: #ffffff;
        border-top: 1px solid #dbdbdb;
        position: fixed;
        bottom: 0;
        width: 100%;
    }

    .input-group {
        display: flex;
        gap: 8px;
        align-items: center;
    }

    .form-control {
        background-color: #ffffff;
        border: 1px solid #dbdbdb;
        border-radius: 22px;
        color: #262626;
        padding: 8px 16px;
        font-size: 0.9rem;
    }

    .form-control::placeholder {
        color: #8e8e8e;
    }

    .btn-send {
        background-color: transparent;
        color: #0095f6;
        border: none;
        font-weight: 600;
        padding: 8px 16px;
    }

    .btn-send:hover {
        color: #00376b;
  }

  
</style>
