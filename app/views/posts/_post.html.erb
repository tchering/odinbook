<%= turbo_frame_tag dom_id(post) do %>
  <div class="card mb-4 rounded-3">
    <div class="card-body p-3">
      <div class="d-flex align-items-center mb-3">
        <%#! avatar section %>
        <div class=" me-3">
          <%= link_to user_path(post.author),data:{turbo_frame:"_top"} do %>
            <%= post.author.avatar.attached? ?
           image_tag(post.author.display_avatar,class:"rounded-circle ",height:"47",width:"50") : 
           image_tag("default_avatar.png",height:"70",width:"70") %>
          <% end %>
        </div>
        <%#!--------------- %>
        <div>
          <h6 class="fw-bold  mb-0"><%=link_to post.author.name,user_path(post.author),class:"text-dark",data:{turbo_frame:"_top"} %></h6>
          <small class="text-secondary"><%= time_ago_in_words(post.created_at) %> ago</small>
        </div>
      </div>
      <%#? Post body ,delete and edit button %>
      <div class="post-content mb-3">
        <div class="d-flex justify-content-between align-items-start">
          <%#* --------Post body------ %>
            <div class="post-text bg-white p-3 rounded-3 w-100">
            <p class="lead mb-0 text-body fw-normal" style="font-size: 0.95rem; letter-spacing: 0.01em;">
              <%= post.body %>
            </p>
          </div>
          <%#*-------------------------- %>
          <%# * Edit and Delete button %>
          <% if post.author == current_user %>
            <div class="post-actions ms-3 d-flex">
              <%= link_to edit_post_path(post), 
              class: "btn btn-link text-decoration-none p-2 rounded-circle hover-bg-light" do %>
                <i class="fas fa-pen text-secondary"></i>
              <% end %>
              <%= link_to post_path(post),
              class: "btn btn-link text-decoration-none p-2 rounded-circle hover-bg-light",
              data: {
                turbo_method: :delete,
                turbo_confirm: "Delete this post?"
              } do %>
                <i class="fas fa-trash-can text-secondary"></i>
              <% end %>
            </div>
          <% end %>
          <%#*------------------------------ %>
        </div>
      </div>
      <%#?-------------------------------------------  %>
      <%# !turbo frame for comments %>
      <%= turbo_frame_tag "comments_#{dom_id(post)}" do %><%#!target%>
        <div class="text-center text-muted ">
          <small>
            <%= link_to post_comments_path(post), data: { turbo_frame: "comments_#{dom_id(post)}" } do %> <%#! trigger%>
              <%#! when clicked will replace the target with comments/index.html.erb turbo tag which has same name %>
              <%= link_to post_comments_path(post),
    class: "text-decoration-none",
    data: { turbo_frame: "comments_#{dom_id(post)}" } do %>
                <div class="d-inline-flex align-items-center bg-light rounded-pill px-3 py-1 shadow-sm comment-badge">
                  <i class="far fa-comments me-2 text-primary"></i>
                  <span class="text-secondary">
                    <%= pluralize(post.comments_count, 'comment') %>
                  </span>
                </div>
              <% end %>
            <% end %>
          </small>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
